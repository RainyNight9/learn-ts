# TS çš„å¿…ä¼šæŠ€èƒ½ï¼Œå­¦å®Œè¿™äº›å°±å¯ä»¥å¹²æ´»äº†

>æœ¬æ–‡çš„ç›®æ ‡ï¼šç†Ÿæ‚‰ TS çš„åŸºæœ¬æ“ä½œï¼Œå­¦å®Œè¿™äº›å°±å¯ä»¥å¹²æ´»äº†...

## åŸºç¡€ç±»å‹

string, number, boolean, null, undefined

## æ•°ç»„ç±»å‹

Array\<T\>ï¼ŒTä»£è¡¨æ•°ç»„ä¸­çš„å…ƒç´ ç±»å‹ã€‚**\<T\>** è¿™ä¸ªå«åšé’»çŸ³ ğŸ’ æ“ä½œç¬¦ï¼ŒæŠŠç±»å‹å½“åšå‚æ•°ä¼ ç»™å¦ä¸€ä¸ªç±»å‹ã€‚

æ€è€ƒï¼šè¦æ±‚æ•°ç»„ä¸­å…ƒç´ ç±»å‹ç»Ÿä¸€ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ

```ts
const A = new Array<string>()
const B = [] // Array<any>

A[0] = 1 // error
A[0] = "1"

// ç‰¹æ®Šæƒ…å†µ
function useState(x){
    // ... 
    return [x, setState]
    // è¿™å—çš„æ€æƒ³å…¶å®ä¸æ˜¯æŒ‰ç…§æ•°ç»„æ¥ç”¨çš„ï¼Œæ˜¯ä¸ºäº†åšè®°å½•ç”¨çš„ï¼Œå½“æˆä¸€ä¸ªå€¼ç±»å‹åœ¨ç”¨ã€‚
}

// ç±»ä¼¼æ•°ç»„çš„è§£æ„èµ‹å€¼ä¹Ÿå¦‚æ­¤
```

    1. å½±å“ä»£ç çš„å¯è¯»æ€§
    2. æ€è™‘ä¸å‘¨ï¼Œå®¹æ˜“å‡ºé”™

## any / unkown / noImplictAny

```ts
let obj: any = { x: 0 };
// åç»­éƒ½ä¸ä¼šè¢«æ£€æŸ¥
// `any`å±è”½äº†æ‰€æœ‰ç±»å‹æ£€æŸ¥ï¼Œç›¸å½“äºä½ ç›¸ä¿¡ä½ å¯¹ç¨‹åºçš„ç†è§£æ˜¯é«˜äº TS çš„

obj.foo();
obj();
obj.bar = 100;
obj = "hello";
const n: number = obj;
```

*implict* : éšå¼

*explict* : æ˜¾å¼

é…ç½®é¡¹ï¼šnoImplicitAnyï¼Œå½“ä½ ä¸ä¸ºå˜é‡å£°æ˜ç±»å‹æ—¶ï¼Œå¦‚æœ noImplicitAny = falseï¼Œé‚£ä¹ˆå®ƒæ˜¯anyã€‚å¦‚æœ noImplicitAny = true å‘¢ï¼Ÿ â€”â€”æŠ¥é”™ error

```ts
let value: unknown;

value = true;             // OK
value = 42;               // OK
value = "Hello World";    // OK

let value2: boolean = value; // Error
```

æ€è€ƒï¼šä¸ºä»€ä¹ˆè¦æä¾›`unknown`

unknown æ˜¯ any çš„ä¸€ä¸ªç±»å‹å®‰å…¨çš„æ›¿ä»£å“
unknown åªå½±å“å½“å‰å˜é‡ï¼Œä¸ä¼šå½±å“å…¶ä»–å˜é‡ï¼Œä¸ä¼šæ±¡æŸ“å…¶ä»–å˜é‡ï¼Œæ”¶æ•›å½±å“èŒƒå›´

## ç±»å‹æ ‡æ³¨

`:` ç”¨äºç±»å‹æ ‡æ³¨ã€‚

```ts
let myName: string = "Alice";

let myName2 = "Alice" // ts è‡ªåŠ¨æ¨å¯¼å‡ºç±»å‹
myName2 = 1 // error
```

## å‡½æ•°

å‡½æ•°ä¸€èˆ¬æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ ‡è®°ç±»å‹ï¼Œä¸€ä¸ªæ˜¯å‚æ•°ï¼Œä¸€ä¸ªæ˜¯è¿”å›å€¼ã€‚

```ts
function greet(name: string): number {
  console.log("Hello, " + name.toUpperCase() + "!!");
}

greet(42) // Error
let x: string = greet("omg") // Error
```

åŒ¿åå‡½æ•°çš„ç±»å‹

```ts
const names = ["Alice", "Bob", "Eve"];
// names çš„ç±»å‹ Array<string>

names.forEach(function (s) {
  console.log(s.toUppercase()); // Error
});

names.forEach((s) => {
  console.log(s.toUppercase()); // Error
});
```

contexture typingï¼ˆæ ¹æ®ä¸Šä¸‹æ–‡çŒœæµ‹åŒ¿åå‡½æ•°å‚æ•°çš„ç±»å‹ï¼‰ã€‚ä¾‹å­ä¸­ä¼šæŠ¥é”™ï¼Œåº”è¯¥æ˜¯toUpperCase(C å¤§å†™)ã€‚

å‡½æ•°å¯é€‰å‚æ•°ï¼š

```ts
function print(arg1: string, arg2?: string) {
    console.log(arg1, arg2)
}

print("Hello", "World")
print("Hello")
```

## å¯¹è±¡ç±»å‹

å¯¹è±¡å¦‚æœæè¿°äº†ç±»å‹ä¹Ÿéœ€è¦ä¸¥æ ¼æ‰§è¡Œã€‚

```ts
const pt : {
    x: number,
    y: number
} = {x: 100, y: 100}

pt.z = 10000 // Error
```

å¯é€‰é¡¹ï¼š

```ts
function printName(obj: {first: string, last?: string}) {
    
}

printName({first: 'Bob'})
printName({first: 'Alice', last: "Alisson"})
```

**`?` è¡¨è¾¾å¼**

? ä»£è¡¨å¯èƒ½æ˜¯ undefinedï¼Œä½†æ˜¯å®‰å…¨å¾ˆå¤šã€‚

```ts
const o: {
    a: string,
    b?: {
        c: string
    }
} = { a: "1" }

console.log(o.b?.c) // undefined

o.b?.c = "Hello" // Error
```

## è”åˆ

```ts
function printId(id: number | string) {
  console.log("Your ID is: " + id);
}

// OK
printId(101);
// OK
printId("202");
// Error
printId({ myID: 22342 });
```

è”åˆç±»å‹åªèƒ½ä½¿ç”¨ä¸¤ä¸ªç±»å‹çš„å…¬å…±æ“ä½œã€‚

```ts
function printId(id: number | string) {
  console.log(id.toUpperCase());
  // Property 'toUpperCase' does not exist on type 'string | number'.
}
```

Typescript ä¼šé’ˆå¯¹è”åˆç±»å‹åšæ’é™¤æ³•ï¼š

```ts
function printID(id: number | string) {
    if(typeof id === 'number') {
        console.log(id)
        return
    }
    console.log(id.toUpperCase())
}
```

è¿™ä¸ªä¹Ÿå«åšç±»å‹çª„åŒ–æŠ€æœ¯ã€‚

## ç±»å‹åˆ«å

```ts
type Point = {
  x: number;
  y: number;
};

function printCoord(pt: Point) {
  console.log("The coordinate's x value is " + pt.x);
  console.log("The coordinate's y value is " + pt.y);
}

printCoord({ x: 100, y: 100 });
```

ç±»å‹åˆ«åä¹Ÿå¯ä»¥ä½¿ç”¨è”åˆï¼š

```ts
type ID = number | string
```

æ³¨æ„ï¼Œåˆ«ååªæ˜¯åˆ«åï¼Œä¾‹å¦‚ï¼š

```ts
let x: ID = 100
// typeof x === 'number'
```

å½“ç„¶åˆ«åå¯ä»¥å’Œå®ƒä»£è¡¨çš„ç±»å‹ä¸€èµ·å·¥ä½œï¼ˆå› ä¸ºåˆ«åä¸æ˜¯åˆ›å»ºäº†æ–°çš„ç±»å‹ï¼‰ï¼š

```jsx
let id: ID = "abc"
id = 456 // OK
```

## æ¥å£

```ts
interface Point {
  x: number;
  y: number;
}

function printCoord(pt: Point) {
  console.log("The coordinate's x value is " + pt.x);
  console.log("The coordinate's y value is " + pt.y);
}

printCoord({ x: 100, y: 100 });
```


```ts
interface Animal {
    name: string
}

// ç»§æ‰¿
interface Bear extends Animal {
    honey: boolean
}


type Animal = {
    name: string
}

// ç»„åˆ
type Bear = Animal & {
    honey: boolean
}
```

æ¥å£çš„å£°æ˜åˆå¹¶(Declaration Merging)

```ts
interface Box {
  height: number;
  width: number;
}
interface Box {
  scale: number;
}

let box: Box = { height: 5, width: 6, scale: 10 };
```

ä¹Ÿå¯ä»¥æŠŠè¿™ç§èƒ½åŠ›çœ‹åšæ˜¯å‘æ¥å£ä¸­æ·»åŠ æˆå‘˜çš„èƒ½åŠ›ã€‚

interface å’Œ type åŒºåˆ«ï¼š

    1. interface èƒ½è¢«ç»§æ‰¿ï¼Œtype æ˜¯ç»„åˆ
    2. interface æœ‰ Declaration Merging

## ç±»å‹æ–­è¨€ (assertion)

æœ‰æ—¶å€™ TS å¯¹ç±»å‹çš„ç†è§£æ²¡æœ‰ä½ å¤šï¼Œè¿™ä¸ªæ—¶å€™ä½ å°±éœ€è¦ç”¨ç±»å‹æ–­è¨€ï¼š

```ts
const myCanvas = 
    // HTMLElement
    document.getElementById("main_canvas") as HTMLCanvasElement;
```

é€šå¸¸ TS ä¼šæ¥æ”¶â€œè¯´çš„é€šâ€çš„ç±»å‹æ–­è¨€ã€‚

æ¯”å¦‚: çˆ¶ç±» as å­ç±»ï¼Œ è”åˆ as å•ä¸ªã€‚

ä½†æ˜¯æœ‰çš„ç±»å‹æ–­è¨€ TS ä¼šæ‹’ç»ï¼Œæ¯”å¦‚ï¼š

```ts
const x = 'hello' as number
```

>TS ä¼šæŠ¥ä¸€ä¸ªè¿™æ ·çš„é”™è¯¯ï¼šç±»å‹ "string" åˆ°ç±»å‹ "number" çš„è½¬æ¢å¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œå› ä¸ºä¸¤ç§ç±»å‹ä¸èƒ½å……åˆ†é‡å ã€‚å¦‚æœè¿™æ˜¯æœ‰æ„çš„ï¼Œè¯·å…ˆå°†è¡¨è¾¾å¼è½¬æ¢ä¸º "unknown"ã€‚ts(2352).

å½“ç„¶æœ‰æ—¶å€™å¯ä»¥ç”¨ any as T æ¥â€œæ¬ºéª—â€ TSï¼Œæˆ–è€…è¯´è’™æ··è¿‡å…³ï¼š

```ts
const a = (expression as unknown) as T;
```

## å­—é¢ç±»å‹

å¯¹äºå¸¸é‡ï¼Œåœ¨ TS ä¸­å®é™…ä¸Šæ˜¯ Literal Typeã€‚

æ¯”å¦‚:

```ts
const someStr = "abc"
// someStr çš„ç±»å‹æ˜¯ "abc"ï¼Œå®ƒçš„å€¼åªèƒ½æ˜¯ abc

const foo = 1
// foo çš„ç±»å‹æ˜¯ 1ï¼Œè€Œä¸æ˜¯æ•´æ•°ã€‚

// å½“ç„¶è¿™åªæ˜¯ ts çš„ç†è§£ï¼Œå¦‚æœç”¨ typeof æ“ä½œç¬¦
// typeof someStr // 'string'
// typeof foo // 'number'

// å¯¹äº let
let foo = 1 // foo: number
```

å¯ä»¥ç”¨å­—é¢ç±»å‹æ¥çº¦æŸä¸€äº›ç‰¹æ®Šçš„å‡½æ•°ï¼Œæ¯”å¦‚ï¼š

```ts
function compare(a: string, b: string): -1 | 0 | 1 {
  return a === b ? 0 : a > b ? 1 : -1;
}
```

å½“ç„¶ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´åŠ è´´è¿‘çœŸå®åœºæ™¯çš„ä¾‹å­ï¼š

```ts
interface Options {
  width: number;
}

function configure(x: Options | "auto") {
  // ...
}

configure({ width: 100 });
configure("auto");
configure("automatic"); 
// ç±»å‹â€œ"automatic"â€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œOptions | "auto"â€çš„å‚æ•°ã€‚ts(2345)
```

å­—é¢ç±»å‹çš„ä¸€ä¸ªå‘ï¼š

```ts
function handleRequest(url: string, method: "GET" | "POST") {
    // do...
}

const req = { url: "https://example.com", method: "GET" };
handleRequest(req.url, req.method);
// Error : ç±»å‹â€œstringâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œ"GET" | "POST"â€çš„å‚æ•°ã€‚ts(2345)

// è§£å†³åŠæ³•
// 1
const req = { url: "https://example.com", method: "GET" as "GET" };

// 2 
handleRequest(req.url, req.method as "GET");

// 3 
const req = { url: "https://example.com", method: "GET" } as const
```

## null / undefined

null å’Œ undefined æ˜¯ Javascript çš„ä¸¤ç§åŸºç¡€ç±»å‹(Primitive type)ï¼Œå®ƒä»¬æè¿°çš„æ˜¯ä¸åŒçš„è¡Œä¸ºï¼š

- undefined æ˜¯ä¸€ä¸ªæ²¡æœ‰è¢«åˆ†é…å€¼çš„å˜é‡
- null æ˜¯ä¸€ä¸ªè¢«äººä¸ºåˆ†é…çš„ç©ºå€¼

Typescript æœ‰ä¸€ä¸ªé…ç½®é¡¹ï¼Œå«åš`strictNullChecks` ï¼Œè¿™ä¸ªé…ç½®é¡¹è®¾ç½®ä¸º `on` çš„æ—¶å€™ï¼Œåœ¨ä½¿ç”¨æœ‰å¯èƒ½æ˜¯ null çš„å€¼å‰ï¼Œéœ€è¦æ˜¾å¼çš„æ£€æŸ¥ã€‚

```ts
function doSomething(x: string | null) {
  if (x === null) {
    // do nothing
  } else {
    console.log("Hello, " + x.toUpperCase());
  }
}
```

å¦å¤–ï¼Œ å¯ä»¥ç”¨`!` æ“ä½œç¬¦ï¼Œæ¥æ–­è¨€æŸä¸ªå€¼ä¸æ˜¯ç©ºå€¼ï¼š

```ts
function doSomething(x: string | null) {
  console.log("Hello, " + x!.toUpperCase());
}
```

## æšä¸¾ç±»å‹

```ts
enum Direction {
  Up = 1,
  Down,
  Left,
  Right,
}
```

ä¸Šé¢çš„å«ä¹‰ï¼Œ Down = 2, Left = 3, Right = 4

æšä¸¾ç±»å‹æœ€åä¼šè¢«ç¿»è¯‘æˆæ•´æ•°ï¼Œå› æ­¤æšä¸¾çš„å¾ˆå¤šæ€§è´¨å’Œæ•´æ•°ç›¸ä¼¼ã€‚æ¯”å¦‚ Down.toString() ä¼šè¿”å› 2ï¼Œè€Œä¸æ˜¯`Down` ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œæšä¸¾ç±»å‹çš„æ•ˆç‡å¾ˆé«˜ã€‚

å½“ç„¶å¦‚æœæƒ³ç”¨å­—ç¬¦ä¸²ç±»çš„æšä¸¾ï¼ˆä¸ªäººè§‰å¾—æ²¡æœ‰å¿…è¦ï¼‰ï¼Œå°±éœ€è¦æ˜¾ç¤ºçš„ä¸ºæ¯ä¸€é¡¹èµ‹å€¼ï¼š

```ts
enum Direction {
  Up = "UP",
  Down = "DOWN",
  Left = "LEFT",
  Right = "RIGHT",
}
```

å½“ç„¶ä¹Ÿå¯ä»¥æ··åˆï¼Œä¸è¿‡éä½†æ²¡æœ‰æ„ä¹‰ï¼Œè€Œä¸”ä¼šå‡å°‘ä»£ç çš„å¯è¯»æ€§ï¼š

```ts
enum BooleanEnum {
  No = 0,
  Yes = "YES",
}
```

åœ¨è¿è¡Œæ—¶ï¼ŒEnum ä¼šè¢«è§£é‡Šæˆå¯¹è±¡ï¼ŒEnum çš„æ¯é¡¹ä¼šè¢«è§£é‡Šæˆå¸¸æ•°ã€‚

ä¸‹é¢è¿™ä¸ªä¾‹å­å¯ä»¥å¾ˆå¥½çš„è¯æ˜ã€‚

```ts
enum E {
  X,
  Y,
  Z,
}

function f(obj: { X: number }) {
  return obj.X;
}

f(E)

```

å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªè¯­æ³•æå– Enum ä¸­çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªä¹Ÿå« Reverse Mappingã€‚

```ts
E[E.X] // X
```

## æ³›å‹

æ³›å‹ï¼Œå¯ä»¥ç†è§£ä¸ºæå–äº†ä¸€ç±»äº‹ç‰©çš„å…±æ€§ç‰¹å¾çš„ä¸€ç§æŠ½è±¡ã€‚æ¯”å¦‚è¯´ï¼šæ¾æ ‘ã€æŸ³æ ‘éƒ½æ˜¯æ ‘ï¼Œåœ¨ç¨‹åºé‡Œæœ‰ 3 ç§è¡¨è¾¾ï¼š

- æ¥å£(Interface)
- ç»§æ‰¿(Inheritance)
- æ³›å‹(Generics)

**ç»§æ‰¿æ˜¯ä¸€ç§å¼ºè¡¨è¾¾ã€‚**

æ¾æ ‘ç»§æ‰¿äºæ ‘ï¼Œæ¾æ ‘åŒæ—¶ä¹Ÿæ˜¯æœ¨æã€‚è¿™æ ·å…³ç³»çš„è¡¨è¾¾ï¼Œè¦ä¹ˆè®©æ¾æ ‘å¤šé‡é›†æˆï¼ˆæ ‘ã€æœ¨æï¼‰ï¼Œè¦ä¹ˆæ¾æ ‘<-æ ‘<-æœ¨æã€‚

æ— è®ºå“ªç§ï¼Œå¢åŠ ç¨‹åºè®¾è®¡å¤æ‚åº¦ï¼Œä¹ŸåŠ å¼ºäº†**ç»§æ‰¿å…³ç³»çš„ç»´æŠ¤æˆæœ¬**ï¼ˆæˆ–è€…è¯´é«˜è€¦åˆåº¦ï¼‰ã€‚è¿™ä¹ˆçœ‹ï¼Œå…³ç³»å¤ªå¼ºï¼Œåè€Œå¹¶ä¸å¥½ï¼

**æ¥å£æ˜¯ä¸€ç§æ–¹é¢(Aspect)æè¿°**ã€‚æ¯”å¦‚æ¾æ ‘å¯ä»¥ç”Ÿé•¿ï¼Œé‚£ä¹ˆæ¾æ ‘æ˜¯ï¼šGrowableï¼›åŠ¨æ¤ç‰©éƒ½å¯ä»¥è¿›åŒ–ï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯Evolvableã€‚

ä¸€ä¸ªç±»å‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªæ–¹é¢çš„ç‰¹æ€§ã€‚

**æ³›å‹(Generics)**æ˜¯å¯¹å…±æ€§çš„æå–ï¼ˆä¸ä»…ä»…æ˜¯æè¿°ï¼‰ã€‚

```ts
// åˆ¶åºŠè€…
class BedMaker<T> {
    // ...
    make(){
        
    }
}

const A = new BedMaker<hongmu>()
const B = new BedMaker<tongmu>()
```

- æœ¨å¤´å¯ä»¥åˆ¶é€ åºŠï¼Œä½†æ˜¯ä¸æ˜¯æ‰€æœ‰çš„æœ¨å¤´å¯ä»¥åˆ¶é€ åºŠ
- åˆ¶é€ åºŠ()è¿™ä¸ªæ–¹æ³•ï¼Œæ”¾åˆ°æœ¨å¤´ç±»ä¸­ä¼šå¾ˆå¥‡æ€ªï¼Œå› ä¸ºæœ¨å¤´ä¸ä»…ä»…å¯ä»¥åˆ¶é€ åºŠ
- åŒç†ï¼Œè®©æœ¨å¤´ç»§æ‰¿äºâ€œå¯ä»¥åˆ¶é€ åºŠâ€è¿™ä¸ªæ¥å£ä¹Ÿå¾ˆå¥‡æ€ª

å¥‡æ€ªçš„ä»£ç å±•ç¤ºï¼š

```ts
class hongmu implements IMakeBed{
    makeBed(){...}
}
```

è®¾è®¡ `IMakeBed` çš„ç›®æ ‡æ˜¯ä¸ºäº†æ‹†åˆ†æè¿°äº‹ç‰©ä¸åŒçš„æ–¹é¢(Aspect)ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªæ›´ä¸“ä¸šçš„è¯æ±‡â€”â€”å…³æ³¨ç‚¹ï¼ˆInterest Point)ã€‚æ‹†åˆ†å…³æ³¨ç‚¹çš„æŠ€å·§ï¼Œå«åšå…³æ³¨ç‚¹åˆ†ç¦»ã€‚å¦‚æœä»…ä»…ç”¨æ¥å£ï¼Œä¸ç”¨æ³›å‹ï¼Œé‚£ä¹ˆå…³æ³¨ç‚¹æ²¡æœ‰åšåˆ°å®Œå…¨è§£è€¦ã€‚

æ³›å‹æ˜¯ä¸€ç§ **æŠ½è±¡å…±æ€§**ï¼ˆæœ¬è´¨ï¼‰çš„ç¼–ç¨‹æ‰‹æ®µï¼Œå®ƒå…è®¸å°†**ç±»å‹ä½œä¸ºå…¶ä»–ç±»å‹çš„å‚æ•°**ï¼ˆè¡¨ç°å½¢å¼ï¼‰ï¼Œä»è€Œ**åˆ†ç¦»ä¸åŒå…³æ³¨ç‚¹çš„å®ç°**ï¼ˆä½œç”¨ï¼‰ã€‚

æ¯”å¦‚ï¼š

    Array\<T\> åˆ†ç¦»çš„æ˜¯æ•°æ®å¯ä»¥è¢«çº¿æ€§è®¿é—®ã€å­˜å‚¨çš„å…±æ€§ã€‚
    Stream\<T\>åˆ†ç¦»çš„æ˜¯æ•°æ®å¯ä»¥éšç€æ—¶é—´äº§ç”Ÿçš„å…±æ€§ã€‚
    Promise\<T\>åˆ†ç¦»çš„æ˜¯æ•°æ®å¯ä»¥è¢«å¼‚æ­¥è®¡ç®—çš„ç‰¹æ€§ã€‚
    ...

### Hello æ³›å‹

```ts
// ä¸€ä¸ªidentityå‡½æ•°æ˜¯è‡ªå·±è¿”å›è‡ªå·±çš„å‡½æ•°
// å½“ç„¶å¯ä»¥å£°æ˜å®ƒæ˜¯ï¼šnumber -> number
function identity(arg: number): number {
  return arg;
}

// ä¸ºäº†è®©identityæ”¯æŒæ›´å¤šç±»å‹å¯ä»¥å£°æ˜å®ƒæ˜¯any
function identity(arg: any): any {
  return arg;
}

// anyä¼šä¸¢å¤±åç»­çš„æ‰€æœ‰æ£€æŸ¥ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘ç”¨æ³›å‹
function identity<Type>(arg: Type): Type {
  return arg;
}


let output = identity<string>("MyString")
// ä¸ç”¨æ˜¾ç¤ºçš„æŒ‡å®š<>ä¸­çš„ç±»å‹
// let output = identity("MyString")

output = 100 // Error
```

> <>å«åšé’»çŸ³ğŸ’æ“ä½œç¬¦ï¼Œä»£è¡¨ä¼ å…¥çš„ç±»å‹å‚æ•°

### æ³›å‹ç±»

æ³›å‹ç±»çš„ä¾‹å­ï¼š

```ts
class GenericNumber<NumType> {
  zeroValue: NumType;
  add: (x: NumType, y: NumType) => NumType;
}

let myGenericNumber = new GenericNumber<number>();
myGenericNumber.zeroValue = 0;
// (number, number) -> number
myGenericNumber.add = function (x, y) {
  return x + y;
};

let stringNumeric = new GenericNumber<string>();
stringNumeric.zeroValue = "";
stringNumeric.add = function (x, y) {
  return x + y;
};
```

å½“ç„¶æ¨èå°†å£°æ˜ï¼ˆDeclarationï¼‰å’Œå®šä¹‰ï¼ˆDefinitionï¼‰å†™åˆ°ä¸€èµ·ï¼š

```ts
class GenericNumber<T> {
    zeroValue: T
    
    constructor(v: T){
        this.zeroValue = v
    }
    
    add(x: T, y: T) {
        return x + y
    }
}
```

### æ³›å‹çº¦æŸ(Generic Constraints)

ä¸‹é¢çš„ç¨‹åºä¼šæŠ¥é”™ï¼š

```ts
function loggingIdentity<Type>(arg: Type): Type {
  console.log(arg.length);
  // Property 'length' does not exist on type 'Type'.
  return arg;
}
```

è€ƒè™‘ä¸ºargå¢åŠ çº¦æŸï¼š

```ts
interface Lengthwise {
  length: number;
}

function loggingIdentity<Type extends Lengthwise>(arg: Type): Type {
  console.log(arg.length); 
  return arg;
}
```

è¿˜æœ‰ä¸€äº›å°æŠ€å·§ **keyof æ“ä½œç¬¦**

å¯ä»¥ç”¨ keyof å…³é”®å­—ä½œä¸ºæ³›å‹çš„çº¦æŸã€‚

```ts
type Point = { x: number; y: number };
type P = keyof Point;
// P = "x" | "y"
```

å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š

```ts
function getProperty<Type, Key extends keyof Type>(obj: Type, key: Key) {
  return obj[key];
}


let x = { a: 1, b: 2, c: 3, d: 4 };

getProperty(x, "a");
getProperty(x, "m"); // Argument of type '"m"' is not assignable to parameter of type '"a" | "b" | "c" | "d"'.
```

å±…ç„¶å¯ä»¥è¿™ä¹ˆç©ï¼Ÿ

å…¶å®ï¼Œå¯¹ TS è€Œè¨€ï¼Œæ‰€æœ‰å¯¹è±¡çš„ key æ˜¯é™æ€çš„ã€‚

```ts
const a = {x: 1, y: 2}
a.z = 3 // Error
```

å› ä¸ºæ˜¯é™æ€çš„ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ `keyof` æ“ä½œç¬¦æ±‚æ‰€æœ‰çš„ keyã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡çš„ç±»å‹æ˜¯ `any` ï¼Œé‚£ä¹ˆkeyof å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚ 

### å®ä¾‹åŒ–æ³›å‹ç±»å‹(å°†ç±»ä½œä¸ºå‚æ•°)

```ts
function create<Type>(c: { new (): Type }): Type {
  return new c();
}

create(Foo) // Fooçš„å®ä¾‹
```

ä¸€ä¸ªä¸é”™çš„ä¾‹å­ï¼š

```ts
class BeeKeeper {
  hasMask: boolean = true;
}

class ZooKeeper {
  nametag: string = "Mikle";
}

class Animal {
  numLegs: number = 4;
}

class Bee extends Animal {
  keeper: BeeKeeper = new BeeKeeper();
}

class Lion extends Animal {
  keeper: ZooKeeper = new ZooKeeper();
}

function createInstance<A extends Animal>(c: new () => A): A {
  return new c();
}

createInstance(Lion).keeper.nametag;
createInstance(Bee).keeper.hasMask;
```

æ€è€ƒï¼šä»€ä¹ˆæ—¶å€™ç”¨æ¥å£ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨æ³›å‹ï¼Ÿ

    æ¥å£æ˜¯çº¦æŸä¸€ä¸ªç±»å‹çš„è¡Œä¸ºçš„ã€‚

    æ³›å‹æ˜¯æå–å…±æ€§ï¼Œåšæˆä¸€ä¸ªåƒæ¨¡æ¿çš„è¯­æ³•ã€‚

æ€è€ƒï¼šå°†ç±»å‹ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œå¹¶å®ä¾‹åŒ–æœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ

## ç±»å‹çš„çª„åŒ–

### è”åˆå’Œçª„åŒ–

```ts
type Padding = number | string

function padLeft(padding: Padding, input: string): string {
    //...
}
```

ä½†æ˜¯è¿™æ ·ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæ¥ä¸‹æ¥éœ€è¦ç”¨ `typeof` åˆ¤æ–­ `padding` çš„ç±»å‹ã€‚

å½“ç„¶ä¸€ä¸ªæ˜¯ `number|string` çš„ç±»å‹å¯ä»¥èµ‹å€¼æˆ `number` æˆ–è€… `string` 

```ts
let x: number | string = 1
x = "Hello"
```

å¦‚æœä¸åˆ¤æ–­ï¼š

```ts
function padLeft(padding: number | string, input: string) {
  return new Array(padding + 1).join(" ") + input;
  // Operator '+' cannot be applied to types 'string | number' and 'number'.
}
```

äºæ˜¯å¢åŠ  `typeof` çš„åˆ¤æ–­ï¼š

```ts
function padLeft(padding: number | string, input: string) {
  if (typeof padding === "number") {
    return new Array(padding + 1).join(" ") + input;
  }
  return padding + input;
}
```

å½“è¿›è¡Œäº† `if + typeof` æ“ä½œåï¼Œts å¯ä»¥è¯†åˆ«å˜çª„åçš„ç±»å‹ï¼Œç§°ä¸ºçª„åŒ–ï¼ˆNarrowingï¼‰ã€‚ä¸Šé¢Narrowing çš„èƒ½åŠ›ï¼Œè®© TS æ¸…æ¥šçš„çŸ¥é“ `padding` æ˜¯æ•°å­—è¿˜æ˜¯å­—ç¬¦ä¸²ã€‚

åœ¨å®ç°å±‚é¢ï¼ŒTS ä¼šè®¤ä¸º `typeof padding === "number"` è¿™æ ·çš„è¡¨è¾¾å¼æ˜¯ä¸€ç§ç±»å‹å®ˆå«ï¼ˆtype guardï¼‰è¡¨è¾¾å¼ã€‚å½“ç„¶è¿™æ˜¯çº¯ç²¹å®ç°å±‚é¢çš„æ¦‚å¿µï¼Œå‡†ç¡®æ¥è¯´ `if + type guard` å®ç°äº† Narrowingã€‚

**åˆ’é‡ç‚¹ï¼šç±»å‹çª„åŒ–ï¼ˆType Narrowingï¼‰æ ¹æ®ç±»å‹å®ˆå«ï¼ˆType Guard)åœ¨å­è¯­å¥å—é‡æ–°å®šä¹‰äº†æ›´å…·ä½“çš„ç±»å‹ã€‚**

#### typeof çš„å®ˆå«ä»¬

```ts
"string"
"number"
"bigint"
"boolean"
"symbol"
"undefined"
"object"
"function"
```

æ³¨æ„ï¼š`typeof null === 'object'`

```ts
function printAll(strs: string | string[] | null) {
  if (typeof strs === "object") {
    for (const s of strs) {
      // Object is possibly 'null'.
      console.log(s);
    }
  } else if (typeof strs === "string") {
    console.log(strs);
  } else {
    // do nothing
  }
}
```

### çœŸå€¼çª„åŒ–(Truthiness narrowing)

Javascript æœ‰ä¸€å¼ å¤æ‚çš„çœŸå€¼è¡¨ï¼Œæ€»ç»“ä¸‹æ¥è¿™äº›å€¼éƒ½ä¼šæ‹¥æœ‰ false çš„è¡Œä¸ºï¼š

```ts
0
NaN
"" (the empty string)
0n (the bigint version of zero)
null
undefined
```

æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡çœŸå€¼å®ç°çª„åŒ–ï¼š

æ¯”å¦‚é¿å…ï¼šTypeError: null is not iterable é”™è¯¯ã€‚

```ts
if (strs && typeof strs === "object") {
    for (const s of strs) {
        console.log(s);
    }
} 
```

å†ä¸¾ä¸ªä¾‹å­ï¼š

```ts
function multiplyAll(
  values: number[] | undefined,
  factor: number
): number[] | undefined {
  if (!values) {
    return values;
  } else {
    return values.map((x) => x * factor);
  }
}
```

**åˆ’é‡ç‚¹ï¼šçœŸå€¼(Truthiness narrowing)çª„åŒ–å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„åº”å¯¹ null/undefined/0 ç­‰å€¼ã€‚**

### ç›¸ç­‰æ€§çª„åŒ–

åœ¨çª„åŒ–å½“ä¸­æœ‰ä¸€ç±»éšå¼çš„çª„åŒ–æ–¹æ³•ï¼Œå°±æ˜¯ç›¸ç­‰æ€§çª„åŒ–ã€‚`===`, `!==`, `==`, and `!=` éƒ½å¯ä»¥ç”¨æ¥çª„åŒ–ç±»å‹ã€‚

ä¸¾ä¾‹ï¼š

```ts
function example(x: string | number, y: string | boolean) {
  if (x === y) {
    // x is string
  } else {
    // x is string | number,
    // y is string | boolean
  }
}
```

å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```ts
function printAll(strs: string | string[] | null) {
  if (strs !== null) {
    if (typeof strs === "object") {
      for (const s of strs) {        
          // (parameter) strs: string[]
      }
    } else if (typeof strs === "string") {
          // (parameter) strs: string
    }
  }
}
```

å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```ts
interface Container {
  value: number | null | undefined;
}

function multiplyValue(container: Container, factor: number) {
  if (container.value !== null) {
    // container.value æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ
    container.value *= factor;
  }
}
```

### `in` æ“ä½œç¬¦çª„åŒ–

JSä¸­çš„`in` æ“ä½œç¬¦çš„ä½œç”¨æ˜¯ï¼Ÿ â€”â€”æ£€éªŒå¯¹è±¡ä¸­æ˜¯å¦æœ‰å±æ€§ã€‚

```ts
type Fish = { swim: () => void };
type Bird = { fly: () => void };


function move(animal: Fish | Bird) {
  if ("swim" in animal) {
    return animal.swim();
  }

  return animal.fly();
}
```

ç‰¹åˆ«æä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¸ç”¨`instanceof Fish` ? å› ä¸º `type` æ²¡æœ‰è¿è¡Œæ—¶ã€‚ 

### `instanceof` çª„åŒ–

`instanceof` å¯ä»¥çª„åŒ–ï¼Œæ³¨æ„ Date ä¸èƒ½æ˜¯ `type` è€Œæ˜¯çœŸå®å­˜åœ¨çš„ Function ç±»å‹ã€‚

```ts
function logValue(x: Date | string) {
  if (x instanceof Date) {
    // x is Date
  } else {
    // x is string
  }
}
```

### ç»„åˆç±»å‹æ¨å¯¼

æœ‰æ—¶å€™ Typescript ä¼šæ¨å¯¼å‡ºç»„åˆç±»å‹ã€‚

```ts
let x = Math.random() < 0.5 ? 10 : "hello world!";
```

è¿™ä¸ªæ—¶å€™ x æ˜¯ `number | string` 

å½“ç„¶ï¼Œ è¿™é‡Œæœ‰ä¸ªé—®é¢˜æ˜¯ `number|string` çš„ç±»å‹å¯ä»¥èµ‹å€¼æˆ `number` æˆ–è€…`string` ã€‚

### æ§åˆ¶æµåˆ†æ

ä½ å¯èƒ½ä¼šé—®ï¼šTypescript æ€ä¹ˆåšåˆ°çª„åŒ–çš„ï¼Ÿ

é¦–å…ˆåœ¨è¯­æ³•åˆ†æé˜¶æ®µï¼ŒTypescript çš„ç¼–è¯‘å™¨ä¼šè¯†åˆ«å‡ºç±»å‹å«å…µè¡¨è¾¾å¼ã€‚åŒ…æ‹¬ä¸€äº›éšæ€§çš„ç±»å‹å«å…µï¼Œæ¯”å¦‚çœŸå€¼è¡¨è¾¾å¼ã€instanceof ç­‰ç­‰ã€‚

é‚£ä¹ˆåœ¨è¯­ä¹‰åˆ†æçš„æ—¶å€™ï¼ŒTypescript é‡åˆ°æ§åˆ¶æµå…³é”®å­— `if/while` ç­‰ï¼Œå°±ä¼šçœ‹çœ‹è¿™é‡Œæœ‰æ²¡æœ‰éœ€è¦åˆ†æçš„çª„åŒ–æ“ä½œã€‚ä¾‹å¦‚ï¼š

```ts
function padLeft(padding: number | string, input: string) {
  if (typeof padding === "number") {
    return new Array(padding + 1).join(" ") + input;
  }
  return padding + input;
}
```

- é¦–å…ˆ TS ä¼šçœ‹åˆ°æœ‰ä¸€ä¸ªå«å…µè¡¨è¾¾å¼ï¼š`typeof padding === 'number'` 
- ç„¶å TS ä¼šå¯¹è¿”å›å€¼ `return padding+input` ä»¥åŠ `return new ...` åˆ†åˆ«åšçª„åŒ–
- çª„åŒ–çš„æœ¬è´¨æ˜¯é‡æ–°å®šä¹‰ç±»å‹

å½“ç„¶å¾ˆå¤šè¯­å¥éƒ½ä¼šè§¦å‘çª„åŒ–ï¼š

```ts
function example() {
  let x: string | number | boolean;

  x = Math.random() < 0.5;
    // x: boolean

  if (Math.random() < 0.5) {
    x = "hello";         
    // x: string
  } else {
    x = 100;
    // x : number         
  }

  return x;        
  // x: string | number
}
```

### ç±»å‹æ–­è¨€ï¼ˆType Assertions/Predicate)

Assertion å’Œ predicate ç¿»è¯‘è¿‡æ¥éƒ½æ˜¯æ–­è¨€ã€‚åœ¨è®¡ç®—æœºä¸­ï¼ŒAsssertion é€šå¸¸æ˜¯æ–­è¨€æŸä¸ªè¡¨è¾¾å¼çš„å€¼æ˜¯ä¸æ˜¯ true/falseã€‚Assertion åœ¨å¾ˆå¤šçš„æµ‹è¯•åº“ä¸­è¢«ä½¿ç”¨ï¼Œæ¯”å¦‚ `assert.equals(a, 1)` ã€‚ä»è¯­ä¹‰ä¸Šï¼Œè¿™é‡Œåœ¨æ–­è¨€ a çš„å€¼æ˜¯1(a === 1 æ˜¯ true)ã€‚

**åˆ’é‡ç‚¹ï¼šAssertion åœ¨è¯´æŸä¸ªä¸œè¥¿æ˜¯ä»€ä¹ˆã€‚**

Predicate é€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›å€¼æ˜¯ true/falseï¼Œæ¯”å¦‚è¯´ list.filter( x => x.score > 500)ï¼Œ`x => x.score > 500` è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª `predicate` å‡½æ•°ã€‚

**åˆ’é‡ç‚¹ï¼šPredicate æ˜¯ä¸€ä¸ªè¿”å› true/false çš„å‡½æ•°**ã€‚

TS ä¸­æœ‰ä¸¤ä¸ªæ–­è¨€æ“ä½œç¬¦ï¼Œ`Assertion` æ“ä½œç¬¦ `as` å’Œ `predicate` æ“ä½œç¬¦ `is` ã€‚

`as` æ“ä½œç¬¦æç¤º Typescript æŸç§ç±»å‹æ˜¯ä»€ä¹ˆï¼ˆå½“ç”¨æˆ·æ¯” Typescript æ›´äº†è§£ç±»å‹çš„æ—¶å€™ä½¿ç”¨ï¼‰ã€‚`is` æ“ä½œç¬¦æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«ï¼Œç”¨äºå¸®åŠ© Typescript Narrowingã€‚

å…·ä½“çš„ä¾‹å­ï¼š

```ts
function isFish(pet: Fish | Bird): pet is Fish  {
  return (pet as Fish).swim !== undefined;
}

let pet = {
    fly: () => {}
}

if (isFish(pet)) { // isFish(pet) æˆä¸ºäº† Type Guard
  pet.swim();
} else {
  pet.fly();
}
```

æ€è€ƒï¼šä¸åŠ `pet is Fish` ä¼šæ€æ ·ï¼Ÿ

æ€è€ƒï¼šas/is ç¬¦ä¸ç¬¦åˆè®¡ç®—æœºæ ‡å‡†è¯­è¨€ä¸­ Assertion/Predicate çš„å«ä¹‰ï¼Ÿ

### åˆ¤åˆ«çš„è”åˆï¼ˆDiscriminated unions)

è€ƒè™‘è¿™ä¸ªå®šä¹‰ï¼š

```ts
interface Shape {
  kind: "circle" | "square";
  radius?: number;
  sideLength?: number;
}

function getArea(shape: Shape) {
  return Math.PI * shape.radius ** 2;
}
```

æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿå¦‚æœè¿™æ ·å‘¢ï¼Ÿ

```ts
function getArea(shape: Shape) {
  if (shape.kind === "circle") {
    return Math.PI * shape.radius ** 2;
    // Object is possibly 'undefined'.
  }
} 
```

äºæ˜¯ç”¨é Null æ–­è¨€æ“ä½œç¬¦ `!`

```ts
function getArea(shape: Shape) {
  if (shape.kind === "circle") {
    return Math.PI * shape.radius! ** 2;
  }
} 
```

èˆ’æœï¼ï¼Ÿï¼Ÿï¼Ÿâ€”â€”è¿˜æ²¡æœ‰â€”â€”

é—®é¢˜åœ¨äº `circle` åº”è¯¥æ˜¯ä¸€ç§å•ç‹¬çš„ç±»å‹ï¼ŒShape å¯èƒ½è¿˜æœ‰ `rect` ç­‰ã€‚

è§£å†³æ–¹æ¡ˆï¼š

```ts
interface Circle {
  kind: "circle";
  radius: number;
}

interface Square {
  kind: "square";
  sideLength: number;
}

type Shape = Circle | Square;

function getArea(shape: Shape) {
  if (shape.kind === "circle") { // Narrowing
    return Math.PI * shape.radius ** 2;                      
  }
}
```

æ•´ç†ä¸‹ï¼š

```t s
function getArea(shape: Shape) {
  switch (shape.kind) {
    case "circle":
      return Math.PI * shape.radius ** 2;
                       
    case "square":
      return shape.sideLength ** 2;
             
  }
}
```

### Neverç±»å‹

Neverï¼Œå°±æ˜¯ä¸åº”è¯¥å‡ºç°çš„æ„æ€ã€‚Never ç±»å‹ä»£è¡¨ä¸€ä¸ªä¸åº”è¯¥å‡ºç°çš„ç±»å‹ã€‚å› æ­¤å¯¹ Never çš„èµ‹å€¼ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚

æ¯”å¦‚ä¸‹é¢å¤„ç† default é€»è¾‘ï¼š

```ts
function getArea(shape: Shape) {
  switch (shape.kind) {
    case "circle":
      return Math.PI * shape.radius ** 2;
    case "square":
      return shape.sideLength ** 2;
    default:
      const _exhaustiveCheck: never = shape;
      // Type ... is not assignable to type never
      return _exhaustiveCheck;
  }
}
```

ç„¶åæˆ‘ä»¬å¢åŠ ä¸€ä¸ª `triangle` ï¼š

```ts
interface Triangle {
  kind: "triangle";
  sideLength: number;
}

type Shape = Circle | Square | Triangle;
```

è¿™ä¸ªæ—¶å€™å› ä¸ºæ²¡æœ‰å®ç° Triangle çš„ getAreaï¼Œå› æ­¤ä¼šæŠ¥é”™ï¼š`Type 'Triangle' is not assignable to type 'never'.` ã€‚

### çª„åŒ–å°ç»“

æ€è€ƒï¼šçª„åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿâ€”â€”è”åˆç±»å‹åœ¨ä½¿ç”¨ä¸­æ ¹æ®ä¸åŒæ§åˆ¶æ¡ä»¶é‡å®šä¹‰çš„é—®é¢˜å—ï¼Ÿâ€”â€”æ›´æå‡å¯¹è”åˆç±»å‹æ ¡éªŒçš„é—®é¢˜ã€‚

æ€è€ƒï¼š`in` `typeof` `instanceof` ä¸­æœ‰æ²¡æœ‰é‡åˆ° JS ä¸­æ²¡æœ‰çš„å…³é”®å­—ï¼Ÿæ‰€ä»¥ç»“è®ºæ˜¯ä»€ä¹ˆï¼Ÿâ€”â€”TS æ˜¯ JS çš„è¶…é›†ï¼Œä½†æ˜¯ TS ä¼šå°½é‡é¿å…æ–°å¢ç‰¹æ€§ã€‚`as` `is` `keyof` `enum`åœ¨ JS ä¸­æ²¡æœ‰ã€‚

## TS æ€æƒ³æ€»ç»“

### ç±»å‹æ£€æŸ¥å¾ˆæœ‰ç”¨

  1. æ£€æŸ¥é”™è¯¯
  2. ä¸€æ¬¡å†™è¿‡ï¼ˆå‡å°‘Debug)
  3. è¾…åŠ©ç³»ç»Ÿè®¾è®¡ï¼ˆç±»å‹çš„æ€è€ƒæ–¹å¼ï¼‰

### ç±»å‹æ˜¯å¯ä»¥æ¨å¯¼çš„

ç±»å‹ç³»ç»Ÿçš„æ„é€ 

- æ¯ä¸ªå˜é‡/å€¼çš„ç±»å‹
- æ“ä½œç¬¦çš„ç±»å‹
- è¡¨è¾¾å¼ç±»å‹
- å‡½æ•°çš„ç±»å‹
- ç±»çš„ç±»å‹

è®©æ‰€æœ‰ç¨‹åºéƒ½æœ‰ç±»å‹ï¼

- æ›´å¥½çš„ä»£ç æç¤º
- æ›´å¥½çš„ä¹¦å†™æ£€æŸ¥
- æ›´å¥½çš„é”™è¯¯æç¤º

### ç±»å‹æ˜¯å¯ä»¥è®¡ç®—çš„

```ts
type Unwrap<T> = T extends Promise<infer U> ? U : T
type p = Unwrap<Promise<number>>
```

ç±»å‹å¯ä»¥è¢«è®¡ç®—ï¼Œ è¿™ä¸º TS æä¾›äº†å¼ºå¤§çš„æŠ½è±¡èƒ½åŠ›ã€‚

```ts
type RouteParams<Route extends string> = 
  Route extends `${string}:${infer Rest}`
    ? RouteDic<Rest> 
    : never 
 
type RouteDic<Arg extends string> = {
  [p in Arg] : string
} 

const path = "/a/:page"

const params : RouteParams<typeof path> = {
  'page' : 'abc'
} 

```

### ç±»å‹å¸®åŠ©æˆ‘ä»¬æ€è€ƒ
